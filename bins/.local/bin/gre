#!/usr/bin/env python3

from tinydb import TinyDB, Query
db = TinyDB(".gre.json")

def clear():
    print(chr(27)+'[2j')
    print('\033c')
    print('\x1bc')

def add():
    clear()
    word = input("Word = ")
    meaning = input("Meaning = ")
    db.insert({'word': word, 'meaning': meaning})
    print("Added !")

def search():
    clear()
    token = input("Word: ")
    find = Query()
    result = db.search(find.word==token)
    try:
        meaning = result[0]['meaning']
    except:
        print("No match found! Exiting.")
        exit()

    print("==========================")
    print(meaning)
    print("==========================")
    return result[0]['meaning']

def prompt():
    return input('''
Pick an action:
1. ADD
2. Lookup
: ''')

if __name__ == "__main__":
    action=int(prompt().strip())
    while ( action in [1,2]):
        try:
            [add, search][action-1]()
            input()
            clear()
            action=int(prompt().strip())
        except KeyboardInterrupt as e:
            print("Exitting !")
